<template>
    <lightning-card title="Log an Issue">
        <template if:true={showUploadFileDialog}>
            <lightning-file-upload
                label="Attach screenshot"
                name="fileUploader"
                accept={acceptedFormats}
                record-id={newIssueRecordId}
                onuploadfinished={handleUploadFinished}>
            </lightning-file-upload>
            <lightning-button label="Cancel File Upload" onclick={handelCancelFileUploadButton}></lightning-button>
        </template>
        <template if:false={showUploadFileDialog}>
            <lightning-record-edit-form object-api-name={issueObject} onsuccess={handleCreated} onerror={handleError} onsubmit={handleSubmit}>
                <lightning-messages></lightning-messages>
                <div class="slds-form-element__row slds-form__item">
                    <div class="slds-col slds-size_3-of-3">
                        <lightning-input-field field-name={detailsField} class="focusField" aria-placeholder="For example: Error occured when I tried to save change to Email field"></lightning-input-field>
                    </div>
                </div>
                <div class="slds-form-element__row slds-form__item">
                    <div class="slds-col slds-size_1-of-2">
                        <lightning-input-field field-name={priorityField}></lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                        <lightning-input-field field-name={typeField}></lightning-input-field>
                    </div>
                </div>

                <div class="slds-form-element__row slds-form__item">
                    <div class="slds-col slds-size_3-of-3">
                        <lightning-input-field field-name={reproStepsField}></lightning-input-field>
                    </div>
                </div>
                <div class="slds-form-element__row slds-form__item">
                    <div class="slds-col slds-size_3-of-3">
                        <lightning-input-field field-name={expectedResultField}></lightning-input-field>
                    </div>
                </div>
                <div class="slds-form-element__row slds-form__item">
                    <div class="slds-col slds-size_3-of-3">
                        <lightning-input-field field-name={actualResultField}></lightning-input-field>
                    </div>
                </div>
                <lightning-button-group>
                    <lightning-button type="submit" label="Create Issue" value="CreateIssue"></lightning-button>
                    <lightning-button type="submit" label="Create Issue and Upload Screenshot" value="CreateIssueUploadFile" onclick={handleSubmitAndUploadFileButton}></lightning-button>
                    <lightning-button type="submit" label="Reset" onclick={handleResetFields}></lightning-button>
                </lightning-button-group>
            </lightning-record-edit-form>
        </template>
    </lightning-card>
</template>